<section>
	<h2>
		<%~ icon`info` %>
		Szczegóły akcji
	</h2>
	<h3>
		<%~ icon`assignment` %>
		Opis akcji
	</h3>
	<textarea
		id="event-description-input"
		api="event/[eventID]/update/description"
		name="description"
		placeholder="(brak opisu)"
		<% if(!$.user.hasPermission($.targetEvent.PERMISSIONS.EDIT) || $.targetEvent.approvalState) { %>
			disabled
		<% } %>
	><%= $.targetEvent.description || "" %></textarea>

	<div class="vertical-split">
		<% if($.targetEvent.dates.start || $.targetEvent.dates.end || $.user.hasPermission($.targetEvent.PERMISSIONS.EDIT)) { %>
			<%~ include("dateInputs", $) %>
		<% } %>
		<% if($.targetEvent.location || $.user.hasPermission($.targetEvent.PERMISSIONS.EDIT)) { %>
			<div>
				<h3>
					<%~ icon`distance` %>
					Lokalizacja
				</h3>
				<form>
					<textarea
						type="text"
						id="event-location-input"
						autocomplete="off"
						api="event/[eventID]/update/location"
						name="location"
						placeholder="(brak lokalizacji)"
						<% if(!$.user.hasPermission($.targetEvent.PERMISSIONS.EDIT) || $.targetEvent.approvalState) { %>
							disabled
						<% } %>
					><%= $.targetEvent.location || "" %></textarea>
				</form>
			</div>
		<% } %>
	</div>

	<div class="button-row">
		<% if($.user.hasPermission($.targetEvent.PERMISSIONS.EDIT) && $.targetEvent.approvalState) { %>
			<button id="unlock-editing-button" opens-dialog="edit-event-dialog">
				<%~ icon`edit` %>
				Edytuj szczegóły
			</button>
			<dialog id="edit-event-dialog">
				<h1>
					<%~ icon`edit` %>
					Edytowanie szczegółów
				</h1>
				<p><b>Akcja jest zatwierdzona</b> - jakakolwiek zmiana do szczegółów lub dokumentów sprawi że akcja będzie wymagała ponownego zatwierdzenia.</p>
				<div class="button-row">
					<button>
						<%~ icon`arrow_back` %>
						Anuluj
					</button>
					<button id="confirm-unlock-editing-button">
						<%~ icon`edit` %>
						Edytuj
					</button>
				</div>
			</dialog>
		<% } %>
		<% if($.user.hasPermission($.targetEvent.PERMISSIONS.DELETE)) { %>
			<button id="delete-event-button" class="dangerous" api="event/[eventID]/delete">
				<%~ icon`delete` %>
				Usuń akcję
			</button>
			<dialog id="delete-event-dialog">
				<h1>Trwale usunąć <%= $.targetEvent.displayName %>?</h1>
				<p>Akcja i wszystkie związane z nią dane zostaną trwale usunięte.</p>
				<div class="button-row">
					<button>
						<%~ icon`arrow_back` %>
						Anuluj
					</button>
					<button class="dangerous" command>
						<%~ icon`delete` %>
						Usuń
					</button>
				</div>
			</dialog>
		<% } %>
	</div>
</section>