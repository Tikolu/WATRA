<% layout("/layouts/dialog", {
	scripts: ["unit/setRole", "user/picker"],
	styles: ["user/picker"],
	meta: {
		unitID: $.targetUnit.id
	}
}) %>
<h1>
	<%~ icon`add_moderator` %>
	Mianowanie na funkcję
</h1>
<main>
	<% if($.tree.userCount) { %>
		<section>
			<h2>Wybierz funkcję</h2>
			<form>
				<label for="role-select">Funkcja:</label>
				<select id="role-select" name="roleType">
					<% for(const roleID of $.roleOptions || []) { %>
						<% const role = Config.roles[roleID] %>
						<option
							value="<%= roleID %>"
							data-name-variants="<%= JSON.stringify(role.name) %>"
							<% if(roleID == $.targetUnit.config.defaultRole) { %> selected <% } %>
						>
							<%= role.name[$.orgContext] || role.name[$.targetUnit.org] || role.name["default"] %>
						</option>
					<% } %>
					<option value="remove">
						(usuń z jednostki)
					</option>
				</select>
			</form>
		</section>
			
		<section class="fill-height">
			<h2>Wybierz użytkowników</h2>
			<%~ include("/user/templates/userPicker", {
				tree: $.tree,
				multiple: true
			}) %>
		</section>
	<% } else { %>
		<p>Brak użytkowników do mianowania</p>
	<% } %>
</main>
<hr>
<div class="button-row">
	<button>
		<%~ icon`arrow_back` %>
		Anuluj
	</button>
	<% if($.tree.userCount) { %>
		<button id="set-role-button" api="unit/[unitID]/member/setRole">
			<%~ icon`check` %>
			<span>Potwierdź mianowanie</span>
		</button>
	<% } %>
</div>